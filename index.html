<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>‡πÄ‡∏Å‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏≤‡∏¢‡∏™‡∏µ‡πà ‡∏õ6/5 ‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</title>

<style>

body{
margin:0;
background:#1b3b2f;
color:#f5e6b8;
font-family:sans-serif;
text-align:center;
}

#splash{
position:fixed;
inset:0;
background:black;
display:flex;
align-items:center;
justify-content:center;
font-size:26px;
z-index:99;
}

#top{
display:flex;
justify-content:space-around;
margin-top:8px;
}

select,button{
background:#6b4f2a;
color:#fff3c4;
border:none;
border-radius:8px;
padding:6px 12px;
}

#game{
margin-top:10px;
display:grid;
grid-template-columns:repeat(4,80px);
gap:10px;
justify-content:center;
}

.card{
width:80px;
height:80px;
background:#2f4f3a;
border:2px solid #bfa76f;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
font-size:34px;
cursor:pointer;
}

.open{background:#bfa76f;color:black}

#overlay{
position:fixed;
inset:0;
display:none;
align-items:center;
justify-content:center;
background:rgba(0,0,0,.6);
z-index:50;
}

#overlay img{width:200px}

#flash{
position:fixed;
inset:0;
background:white;
opacity:0;
pointer-events:none;
z-index:60;
}

#aura{color:#7cff7c;margin-top:6px}

</style>
</head>

<body>

<div id="splash">üåø ‡πÄ‡∏Å‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏≤‡∏¢‡∏™‡∏µ‡πà ‡∏õ6/5<br>‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</div>
<div id="flash"></div>
<div id="overlay"><img id="overlayImg"></div>

<h3>üéµ ‡πÄ‡∏Å‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ä‡∏≤‡∏¢‡∏™‡∏µ‡πà ‡∏õ6/5 ‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</h3>

<div id="top">
‚ù§Ô∏è <span id="life">6</span>
‡∏î‡πà‡∏≤‡∏ô <span id="level">1</span>

<select id="mode" onchange="startGame()">
<option value="easy">‡∏á‡πà‡∏≤‡∏¢</option>
<option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
<option value="hard">‡∏¢‡∏≤‡∏Å</option>
<option value="extreme">‡πÇ‡∏´‡∏î</option>
</select>

<button onclick="document.documentElement.requestFullscreen()">‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠</button>
</div>

<div id="aura"></div>
<div id="game"></div>

<script>

setTimeout(()=>splash.style.display="none",1500);

// sounds
const correctSound=new Audio("correct.mp3");
const wrongSound=new Audio("wrong.mp3");
const winSound=new Audio("win.mp3");
const loseSound=new Audio("lose.mp3");
const flashSound=new Audio("flashbang.mp3");

const sounds=[correctSound,wrongSound,winSound,loseSound,flashSound];

function play(s){
sounds.forEach(x=>{x.pause();x.currentTime=0});
s.play();
}

// symbols
const notes=[
"ùÖù","ùÖû","‚ô©","‚ô™",
"ùÑª","ùÑº","ùÑΩ","ùÑæ"
];

const modes={easy:3,normal:4,hard:6,extreme:8};

let life=6,level=1,first=null,lock=true,match=0;

function vibrate(){navigator.vibrate?.(200);}

function flashbang(){
play(flashSound);
flash.style.opacity=1;
setTimeout(()=>flash.style.opacity=0,120);
}

function show(img){
lock=true;
overlayImg.src=img;
overlay.style.display="flex";
flashbang();
setTimeout(()=>{
overlay.style.display="none";
lock=false;
},700);
}

function auraRNG(){
const a=["üî• ‡πÑ‡∏ü","üåø ‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥","‚ö° ‡∏û‡∏≤‡∏¢‡∏∏","üíé ‡πÇ‡∏ö‡∏£‡∏≤‡∏ì","üëë ‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô"];
aura.innerText="‡πÑ‡∏î‡πâ‡∏≠‡∏≠‡∏£‡πà‡∏≤: "+a[Math.floor(Math.random()*a.length)];
}

function startGame(){
life=6;level=1;
build();
}

function build(){

lock=true;
sounds.forEach(x=>{x.pause();x.currentTime=0});

lifeSpan.innerText=life;
levelSpan.innerText=level;
game.innerHTML="";
first=null;
match=0;

let p=modes[mode.value];
let arr=[];

for(let i=0;i<p;i++)arr.push(notes[i],notes[i]);
arr.sort(()=>Math.random()-0.5);

arr.forEach(n=>{
let c=document.createElement("div");
c.className="card";

c.onclick=()=>{

if(lock||c.classList.contains("open"))return;

c.classList.add("open");
c.innerText=n;

if(!first){first=c;return;}

lock=true;

if(first.innerText===n){

play(correctSound);
show("win.png");
auraRNG();
match++;
first=null;

setTimeout(()=>{
if(match===p){
 if(mode.value==="extreme"){
  play(winSound);
  show("victory.png");
 }else{
  level++;
  play(winSound);
  build();
 }
}else lock=false;
},600);

}else{

play(wrongSound);
show("wrong.png");
vibrate();
life--;
lifeSpan.innerText=life;

setTimeout(()=>{
first.classList.remove("open");
c.classList.remove("open");
first.innerText="";
c.innerText="";
first=null;

if(life<=0){
 play(loseSound);
 show("lose.png");
}else lock=false;

},600);

}

};

game.appendChild(c);
});

setTimeout(()=>lock=false,300);
}

// elements
const game=document.getElementById("game");
const overlay=document.getElementById("overlay");
const overlayImg=document.getElementById("overlayImg");
const aura=document.getElementById("aura");
const lifeSpan=document.getElementById("life");
const levelSpan=document.getElementById("level");
const mode=document.getElementById("mode");
const splash=document.getElementById("splash");
const flash=document.getElementById("flash");

startGame();

</script>

</body>
  </html>
